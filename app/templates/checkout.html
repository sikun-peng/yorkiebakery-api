{% extends "base.html" %}

{% block title %}Checkout ¬∑ Yorkie Bakery{% endblock %}

{% block content %}
<div class="checkout-page">
  <h1>üí≥ Checkout</h1>

  {% if cart %}
    <div class="checkout-layout">
      <!-- LEFT: CUSTOMER INFO -->
      <form action="/cart/checkout" method="post" class="checkout-form">
        <div class="card-section">
          <h3>Contact Information</h3>
          <p class="section-subtitle">
            We‚Äôll use this to send your order confirmation and delivery updates. ‚úâÔ∏è
          </p>

          <label for="name">Your Name *</label>
          <input type="text" name="name" id="name" placeholder="e.g. Alex Baker" value="{{ contact_name }}" required>

          <label for="email">Email *</label>
          <input type="email" name="email" id="email" placeholder="you@example.com" value="{{ contact_email }}" required>

          <label for="phone">Phone (optional)</label>
          <input type="tel" name="phone" id="phone" placeholder="(555) 123-4567">

          <p class="section-subtitle" style="margin-top: 4px;">Delivery Address</p>

          <label for="address_line1">Street Address *</label>
          <input type="text" name="address_line1" id="address_line1" placeholder="123 Bakery Lane" required>

          <label for="address_line2">Apartment, suite, etc. (optional)</label>
          <input type="text" name="address_line2" id="address_line2" placeholder="Apt 4B">

          <div class="address-grid">
            <div>
              <label for="city">City *</label>
              <input type="text" name="city" id="city" placeholder="Portland" required>
            </div>
            <div>
              <label for="state">State / Province *</label>
              <select name="state" id="state" required>
                <option value="" disabled selected>Select state</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <option value="DE">Delaware</option>
                <option value="FL">Florida</option>
                <option value="GA">Georgia</option>
                <option value="HI">Hawaii</option>
                <option value="ID">Idaho</option>
                <option value="IL">Illinois</option>
                <option value="IN">Indiana</option>
                <option value="IA">Iowa</option>
                <option value="KS">Kansas</option>
                <option value="KY">Kentucky</option>
                <option value="LA">Louisiana</option>
                <option value="ME">Maine</option>
                <option value="MD">Maryland</option>
                <option value="MA">Massachusetts</option>
                <option value="MI">Michigan</option>
                <option value="MN">Minnesota</option>
                <option value="MS">Mississippi</option>
                <option value="MO">Missouri</option>
                <option value="MT">Montana</option>
                <option value="NE">Nebraska</option>
                <option value="NV">Nevada</option>
                <option value="NH">New Hampshire</option>
                <option value="NJ">New Jersey</option>
                <option value="NM">New Mexico</option>
                <option value="NY">New York</option>
                <option value="NC">North Carolina</option>
                <option value="ND">North Dakota</option>
                <option value="OH">Ohio</option>
                <option value="OK">Oklahoma</option>
                <option value="OR">Oregon</option>
                <option value="PA">Pennsylvania</option>
                <option value="RI">Rhode Island</option>
                <option value="SC">South Carolina</option>
                <option value="SD">South Dakota</option>
                <option value="TN">Tennessee</option>
                <option value="TX">Texas</option>
                <option value="UT">Utah</option>
                <option value="VT">Vermont</option>
                <option value="VA">Virginia</option>
                <option value="WA">Washington</option>
                <option value="WV">West Virginia</option>
                <option value="WI">Wisconsin</option>
                <option value="WY">Wyoming</option>
                <option value="Other">Other</option>
              </select>
            </div>
          </div>

          <div class="address-grid">
            <div>
              <label for="postal_code">ZIP / Postal Code *</label>
              <input type="text" name="postal_code" id="postal_code" placeholder="97205" required>
            </div>
            <div>
              <label for="country">Country *</label>
              <input type="text" name="country" id="country" placeholder="United States" required>
            </div>
          </div>

          <label for="delivery_notes">Delivery Notes (optional)</label>
          <textarea name="delivery_notes" id="delivery_notes" rows="2" placeholder="Gate code, drop-off notes, allergies"></textarea>
        </div>

        <button type="submit" class="btn confirm-btn">
          ‚úÖ Confirm Order
        </button>
      </form>

      <!-- RIGHT: ORDER SUMMARY -->
      <aside class="checkout-summary card-section">
        <h3>Order Summary</h3>
        <p class="section-subtitle">
          A quick peek at all the treats you‚Äôre about to enjoy. üç∞
        </p>

        <table class="checkout-table">
          <thead>
            <tr>
              <th>Item</th>
              <th class="text-center">Qty</th>
              <th class="text-right">Price</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart %}
            <tr>
              <td>
                <span class="item-title">{{ item.title }}</span>
              </td>
              <td class="text-center">{{ item.qty }}</td>
              <td class="text-right">
                <span class="old-price">${{ "%.2f"|format(item.price * item.qty) }}</span>
                <span class="free-pill">0.00</span>
              </td>
            </tr>
            {% endfor %}
            <tr class="total-row">
              <td colspan="2"><strong>Subtotal</strong></td>
              <td class="text-right total-amount">
                <span class="old-price">${{ "%.2f"|format(original_total) }}</span>
              </td>
            </tr>
            <tr class="total-row">
              <td colspan="2"><strong>Discount</strong></td>
              <td class="text-right total-amount">
                <strong>100% off</strong>
              </td>
            </tr>
            <tr class="total-row">
              <td colspan="2"><strong>Total</strong></td>
              <td class="text-right total-amount">
                <span class="free-pill large">Free</span>
              </td>
            </tr>
          </tbody>
        </table>

        <p class="tiny-note">
          üí° Prices shown include all taxes. Delivery fees (if any) will be shown at the next step.
        </p>
      </aside>
    </div>
{% else %}
    <div class="empty-cart">
      <p>Your cart is empty. üòø</p>
      <a href="/menu/view" class="btn ghost-btn">‚Üê Back to Menu</a>
    </div>
  {% endif %}
</div>

<div class="payment-strip">
  <div class="payment-strip-inner">
    <div class="payment-row">
      <div class="payment-col left">
        <div class="badge-inline">
          <img src="/static/images/badge_icann.jpg" alt="ICANN">
          <p class="registrar-note">We are an not ICANN-accredited registrar.<br>Serving customers since 2099.</p>
        </div>
      </div>

      <div class="payment-col center">
        <p class="payment-label">Payment Options</p>
        <div class="payment-badges">
          <img src="/static/images/badge_amex.jpg" alt="American Express">
          <img src="/static/images/badge_bitcoin.jpg" alt="Bitcoin">
          <img src="/static/images/badge_mastercard.jpg" alt="Mastercard">
          <img src="/static/images/badge_paypal.jpg" alt="PayPal">
          <img src="/static/images/badge_visa.png" alt="Visa">
          <img src="/static/images/badge_discover.jpg" alt="Discover">
        </div>
      </div>

      <div class="payment-col right">
        <div class="right-badges">
          <img src="/static/images/badge_sectigo.jpg" alt="Sectigo Secure">
          <img src="/static/images/badge_google_store.jpg" alt="Google Play">
          <img src="/static/images/badge_apple_store.jpg" alt="App Store">
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
