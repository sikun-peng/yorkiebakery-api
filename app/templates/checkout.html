{% extends "base.html" %}

{% block title %}Checkout ¬∑ Yorkie Bakery{% endblock %}

{% block content %}
<div class="checkout-page">
  <h1>üí≥ Checkout</h1>

  {% if cart %}
    <div class="checkout-layout">
      <!-- LEFT: CUSTOMER INFO -->
      <form action="/cart/checkout" method="post" class="checkout-form">
        <div class="card-section">
          <h3>Contact Information</h3>
          <p class="section-subtitle">
            We‚Äôll use this to send your order confirmation and delivery updates. ‚úâÔ∏è
          </p>

          <label for="name">Your Name *</label>
          <input type="text" name="name" id="name" placeholder="e.g. Alex Baker" value="{{ contact_name }}" required>

          <label for="email">Email *</label>
          <input type="email" name="email" id="email" placeholder="you@example.com" value="{{ contact_email }}" required>

          <label for="phone">Phone (optional)</label>
          <input type="tel" name="phone" id="phone" placeholder="(555) 123-4567" value="{{ contact_phone }}">

          <p class="section-subtitle" style="margin-top: 4px;">Delivery Address</p>

          <label for="address_line1">Street Address *</label>
          <input type="text" name="address_line1" id="address_line1" placeholder="123 Bakery Lane" value="{{ address_defaults.address_line1 }}" required>

          <label for="address_line2">Apartment, suite, etc. (optional)</label>
          <input type="text" name="address_line2" id="address_line2" placeholder="Apt 4B" value="{{ address_defaults.address_line2 }}">

          <div class="address-grid">
            <div>
              <label for="city">City *</label>
              <input type="text" name="city" id="city" placeholder="Portland" value="{{ address_defaults.city }}" required>
            </div>
            <div>
              <label for="state">State / Province *</label>
              <select name="state" id="state" required>
                <option value="" disabled {% if not address_defaults.state %}selected{% endif %}>Select state</option>
                <option value="AL" {% if address_defaults.state == "AL" %}selected{% endif %}>Alabama</option>
                <option value="AK" {% if address_defaults.state == "AK" %}selected{% endif %}>Alaska</option>
                <option value="AZ" {% if address_defaults.state == "AZ" %}selected{% endif %}>Arizona</option>
                <option value="AR" {% if address_defaults.state == "AR" %}selected{% endif %}>Arkansas</option>
                <option value="CA" {% if address_defaults.state == "CA" %}selected{% endif %}>California</option>
                <option value="CO" {% if address_defaults.state == "CO" %}selected{% endif %}>Colorado</option>
                <option value="CT" {% if address_defaults.state == "CT" %}selected{% endif %}>Connecticut</option>
                <option value="DE" {% if address_defaults.state == "DE" %}selected{% endif %}>Delaware</option>
                <option value="FL" {% if address_defaults.state == "FL" %}selected{% endif %}>Florida</option>
                <option value="GA" {% if address_defaults.state == "GA" %}selected{% endif %}>Georgia</option>
                <option value="HI" {% if address_defaults.state == "HI" %}selected{% endif %}>Hawaii</option>
                <option value="ID" {% if address_defaults.state == "ID" %}selected{% endif %}>Idaho</option>
                <option value="IL" {% if address_defaults.state == "IL" %}selected{% endif %}>Illinois</option>
                <option value="IN" {% if address_defaults.state == "IN" %}selected{% endif %}>Indiana</option>
                <option value="IA" {% if address_defaults.state == "IA" %}selected{% endif %}>Iowa</option>
                <option value="KS" {% if address_defaults.state == "KS" %}selected{% endif %}>Kansas</option>
                <option value="KY" {% if address_defaults.state == "KY" %}selected{% endif %}>Kentucky</option>
                <option value="LA" {% if address_defaults.state == "LA" %}selected{% endif %}>Louisiana</option>
                <option value="ME" {% if address_defaults.state == "ME" %}selected{% endif %}>Maine</option>
                <option value="MD" {% if address_defaults.state == "MD" %}selected{% endif %}>Maryland</option>
                <option value="MA" {% if address_defaults.state == "MA" %}selected{% endif %}>Massachusetts</option>
                <option value="MI" {% if address_defaults.state == "MI" %}selected{% endif %}>Michigan</option>
                <option value="MN" {% if address_defaults.state == "MN" %}selected{% endif %}>Minnesota</option>
                <option value="MS" {% if address_defaults.state == "MS" %}selected{% endif %}>Mississippi</option>
                <option value="MO" {% if address_defaults.state == "MO" %}selected{% endif %}>Missouri</option>
                <option value="MT" {% if address_defaults.state == "MT" %}selected{% endif %}>Montana</option>
                <option value="NE" {% if address_defaults.state == "NE" %}selected{% endif %}>Nebraska</option>
                <option value="NV" {% if address_defaults.state == "NV" %}selected{% endif %}>Nevada</option>
                <option value="NH" {% if address_defaults.state == "NH" %}selected{% endif %}>New Hampshire</option>
                <option value="NJ" {% if address_defaults.state == "NJ" %}selected{% endif %}>New Jersey</option>
                <option value="NM" {% if address_defaults.state == "NM" %}selected{% endif %}>New Mexico</option>
                <option value="NY" {% if address_defaults.state == "NY" %}selected{% endif %}>New York</option>
                <option value="NC" {% if address_defaults.state == "NC" %}selected{% endif %}>North Carolina</option>
                <option value="ND" {% if address_defaults.state == "ND" %}selected{% endif %}>North Dakota</option>
                <option value="OH" {% if address_defaults.state == "OH" %}selected{% endif %}>Ohio</option>
                <option value="OK" {% if address_defaults.state == "OK" %}selected{% endif %}>Oklahoma</option>
                <option value="OR" {% if address_defaults.state == "OR" %}selected{% endif %}>Oregon</option>
                <option value="PA" {% if address_defaults.state == "PA" %}selected{% endif %}>Pennsylvania</option>
                <option value="RI" {% if address_defaults.state == "RI" %}selected{% endif %}>Rhode Island</option>
                <option value="SC" {% if address_defaults.state == "SC" %}selected{% endif %}>South Carolina</option>
                <option value="SD" {% if address_defaults.state == "SD" %}selected{% endif %}>South Dakota</option>
                <option value="TN" {% if address_defaults.state == "TN" %}selected{% endif %}>Tennessee</option>
                <option value="TX" {% if address_defaults.state == "TX" %}selected{% endif %}>Texas</option>
                <option value="UT" {% if address_defaults.state == "UT" %}selected{% endif %}>Utah</option>
                <option value="VT" {% if address_defaults.state == "VT" %}selected{% endif %}>Vermont</option>
                <option value="VA" {% if address_defaults.state == "VA" %}selected{% endif %}>Virginia</option>
                <option value="WA" {% if address_defaults.state == "WA" %}selected{% endif %}>Washington</option>
                <option value="WV" {% if address_defaults.state == "WV" %}selected{% endif %}>West Virginia</option>
                <option value="WI" {% if address_defaults.state == "WI" %}selected{% endif %}>Wisconsin</option>
                <option value="WY" {% if address_defaults.state == "WY" %}selected{% endif %}>Wyoming</option>
                <option value="Other" {% if address_defaults.state == "Other" %}selected{% endif %}>Other</option>
              </select>
            </div>
          </div>

          <div class="address-grid">
            <div>
              <label for="postal_code">ZIP / Postal Code *</label>
              <input type="text" name="postal_code" id="postal_code" placeholder="97205" value="{{ address_defaults.postal_code }}" required>
            </div>
            <div>
              <label for="country">Country *</label>
              <input type="text" name="country" id="country" placeholder="United States" value="{{ address_defaults.country }}" required>
            </div>
          </div>

          <label for="delivery_notes">Delivery Notes (optional)</label>
          <textarea name="delivery_notes" id="delivery_notes" rows="2" placeholder="Gate code, drop-off notes, allergies"></textarea>
        </div>

        <button type="submit" class="btn confirm-btn">
          ‚úÖ Confirm Order
        </button>
      </form>

      <!-- RIGHT: ORDER SUMMARY -->
      <aside class="checkout-summary card-section">
        <h3>Order Summary</h3>
        <p class="section-subtitle">
          A quick peek at all the treats you‚Äôre about to enjoy. üç∞
        </p>

        <table class="checkout-table">
          <thead>
            <tr>
              <th>Item</th>
              <th class="text-center">Qty</th>
              <th class="text-right">Price</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart %}
            <tr>
              <td>
                <span class="item-title">{{ item.title }}</span>
              </td>
              <td class="text-center">{{ item.qty }}</td>
              <td class="text-right">
                <span class="old-price">${{ "%.2f"|format(item.price * item.qty) }}</span>
                <span class="free-pill">0.00</span>
              </td>
            </tr>
            {% endfor %}
            <tr class="total-row">
              <td colspan="2"><strong>Subtotal</strong></td>
              <td class="text-right total-amount">
                <span class="old-price">${{ "%.2f"|format(original_total) }}</span>
              </td>
            </tr>
            <tr class="total-row">
              <td colspan="2"><strong>Discount</strong></td>
              <td class="text-right total-amount">
                <strong>100% off</strong>
              </td>
            </tr>
            <tr class="total-row">
              <td colspan="2"><strong>Total</strong></td>
              <td class="text-right total-amount">
                <span class="free-pill large">Free</span>
              </td>
            </tr>
          </tbody>
        </table>

        <p class="tiny-note">
          üí° Prices shown include all taxes. Delivery fees (if any) will be shown at the next step.
        </p>
      </aside>
    </div>
{% else %}
    <div class="empty-cart">
      <p>Your cart is empty. üòø</p>
      <a href="/menu/view" class="btn ghost-btn">‚Üê Back to Menu</a>
    </div>
  {% endif %}
</div>

<div class="payment-strip">
  <div class="payment-strip-inner">
    <div class="payment-row">
      <div class="payment-col left">
        <div class="badge-inline">
          <img src="/static/images/badge_icann.jpg" alt="ICANN">
          <p class="registrar-note">We are an not ICANN-accredited registrar.<br>Serving customers since 2099.</p>
        </div>
      </div>

      <div class="payment-col center">
        <p class="payment-label">Payment Options</p>
        <div class="payment-badges">
          <img src="/static/images/badge_amex.jpg" alt="American Express">
          <img src="/static/images/badge_bitcoin.jpg" alt="Bitcoin">
          <img src="/static/images/badge_mastercard.jpg" alt="Mastercard">
          <img src="/static/images/badge_paypal.jpg" alt="PayPal">
          <img src="/static/images/badge_visa.png" alt="Visa">
          <img src="/static/images/badge_discover.jpg" alt="Discover">
        </div>
      </div>

      <div class="payment-col right">
        <div class="right-badges">
          <img src="/static/images/badge_sectigo.jpg" alt="Sectigo Secure">
          <img src="/static/images/badge_google_store.jpg" alt="Google Play">
          <img src="/static/images/badge_apple_store.jpg" alt="App Store">
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
