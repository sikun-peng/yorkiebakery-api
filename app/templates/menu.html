{% extends "base.html" %}

{% block title %}Menu Â· Yorkie Bakery{% endblock %}

{% block content %}
<h1>ğŸ½ï¸ Our Menu</h1>

<div class="menu-grid">

  {% set cart = request.session.get("cart", {}) %}

  {% for item in items %}
  <div class="menu-card">

    <!-- Image -->
    {% if item.image_url %}
      <img src="{{ item.image_url }}" alt="{{ item.title }}">
    {% else %}
      <img src="/static/images/default_menu_image.jpg" alt="No Image Available">
    {% endif %}

    <!-- Title + Desc -->
    <h2>{{ item.title }}</h2>
    <p>{{ item.description }}</p>

    <!-- Price -->
    <p class="price">${{ "%.2f"|format(item.price) }}</p>

    <!-- Quantity in session -->
    {% set qty = cart.get(item.id|string, 0) %}

    {% if qty > 0 %}
      <span class="item-qty-badge">{{ qty }}</span>
    {% endif %}

    {% if qty == 0 %}
      <form action="/cart/add/{{ item.id }}" method="post">
        <button type="submit" class="btn">Add to Cart ğŸ›ï¸</button>
      </form>
    {% else %}
      <div class="qty-controls">

        <!-- Minus -->
        <form action="/cart/remove/{{ item.id }}" method="post" style="display:inline;">
          <button type="submit" class="qty-btn">âˆ’</button>
        </form>

        <span class="qty-display">{{ qty }}</span>

        <!-- Plus -->
        <form action="/cart/add/{{ item.id }}" method="post" style="display:inline;">
          <button type="submit" class="qty-btn">+</button>
        </form>

      </div>
    {% endif %}

  </div>
  {% endfor %}

</div>
{% endblock %}