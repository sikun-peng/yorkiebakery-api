{% extends "base.html" %}

{% block title %}Reset Password - Yorkie Bakery{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-card">
        <h1>Reset Your Password</h1>

        {% if error %}
        <div class="error-message">
            {{ error }}
        </div>
        {% endif %}

        {% if success %}
        <div class="success-message">
            ✅ {{ message }}
            <p style="margin-top: 10px;">
                <a href="/auth/login">Click here to login</a>
            </p>
        </div>
        {% endif %}

        {% if not success %}
        <form id="reset-password-form" method="POST" action="/auth/reset_password">
            <input type="hidden" name="token" value="{{ token }}">

            <div class="form-group">
                <label for="new_password">New Password:</label>
                <input type="password" id="new_password" name="new_password" required
                       minlength="6" placeholder="Enter your new password">
            </div>

            <div class="form-group">
                <label for="confirm_password">Confirm Password:</label>
                <input type="password" id="confirm_password" name="confirm_password" required
                       placeholder="Confirm your new password">
            </div>

            <button type="submit" class="btn btn-primary">Reset Password</button>
        </form>

        <div class="back-link">
            <a href="/auth/login">← Back to Login</a>
        </div>
        {% endif %}
    </div>
</div>

<script>
document.getElementById('reset-password-form').addEventListener('submit', function(e) {
    const password = document.getElementById('new_password').value;
    const confirmPassword = document.getElementById('confirm_password').value;

    if (password.length < 6) {
        e.preventDefault();
        alert('Password must be at least 6 characters long.');
        return;
    }

    if (password !== confirmPassword) {
        e.preventDefault();
        alert('Passwords do not match.');
        return;
    }
});
</script>
{% endblock %}