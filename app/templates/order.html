{% extends "base.html" %}
{% block title %}My Orders Â· Yorkie Bakery{% endblock %}

{% block content %}
<div class="container">
    <h1>ğŸ“¦ My Orders </h1>

    {% if not orders_with_items %}
        <div class="empty-state">
            <p>You haven't placed any orders yet.</p>
            <a href="/menu/view" class="btn">Start Shopping</a>
        </div>
    {% else %}
        {% for order_data in orders_with_items %}
        <div class="order-card">
            <div class="order-header">
                <h3> ğŸ Order #{{ order_data['order']['id'][:8] }}...</h3>
                <div class="order-meta">
                    <span class="status {{ order_data['order']['status'] }}">{{ order_data['order']['status'].title() }}</span>
                    <span class="date">
                        {% if order_data['order']['created_at'] %}
                            {{ order_data['order']['created_at'].strftime('%b %d, %Y at %I:%M %p') }}
                        {% else %}
                            Date not available
                        {% endif %}
                    </span>
                    <span class="total-amount">${{ "%.2f"|format(order_data['order']['total']) }}</span>
                </div>
            </div>

            <div class="order-items-simple">
                <h4>Items ({{ order_data['items']|length }}):</h4>
                <ul>
                    {% for item in order_data['items'] %}
                    <li class="order-item-simple">
                        <span class="item-name-simple">{{ item['title'] }}</span>
                        <span class="item-quantity-simple">Qty: {{ item['quantity'] }}</span>
                        <span class="item-price-simple">${{ "%.2f"|format(item['unit_price']) }} each</span>
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="order-footer">
                <a href="/orders/{{ order_data['order']['id'] }}/detail" class="btn btn-outline">View Details</a>
            </div>
        </div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}