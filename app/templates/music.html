{% extends "base.html" %}

{% block title %}ðŸŽµ Music Â· Yorkie Bakery{% endblock %}

{% block content %}
<h1 class="cursive-font text-center mb-6">ðŸŽ¶ Our Music Playlist</h1>

<!-- Define default categories -->
{% set categories = ["Piano Solo", "Accompaniment", "To-Do List", "Wishlist"] %}

<!-- Loop through categories -->
{% for category in categories %}
  {% set cat_tracks = tracks | selectattr("category", "equalto", category) | list %}
  {% if cat_tracks %}
    <section class="music-section">
      <h2>{{ category }}</h2>

      <!-- ðŸŽµ Grid layout for tracks -->
      <div class="track-grid">
        {% for track in cat_tracks %}
        <div class="music-track-card">

          <!-- ðŸŽ¨ Cover art -->
          {% if track.cover_url %}
            <img src="{{ track.cover_url }}" alt="{{ track.title }}" class="music-cover-img">
          {% else %}
            <img src="/static/default_music_cover.jpg" alt="No Cover" class="music-cover-img">
          {% endif %}

          <!-- ðŸŽ¶ Track info -->
          <div class="music-info">
            <h3>{{ track.title }}</h3>

            {% if track.composer or track.performer %}
              <p>
                {{ track.composer }}{% if track.composer and track.performer %} â€” {% endif %}{{ track.performer }}
              </p>
            {% endif %}

            {% if track.description %}
              <p>{{ track.description }}</p>
            {% endif %}

            <!-- ðŸŽ§ Audio player -->
            {% if track.file_url %}
              <audio controls>
                <source src="{{ track.file_url }}" type="audio/mpeg">
                Your browser does not support the audio element.
              </audio>
            {% else %}
              <p class="text-gray-500 italic">Track unavailable</p>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}
{% endfor %}

{% if not tracks %}
  <p class="text-center text-gray-600 mt-8 italic">No tracks uploaded yet ðŸŽ§</p>
{% endif %}
{% endblock %}